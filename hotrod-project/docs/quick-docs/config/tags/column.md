
# The `<column>` Tag

This tag can be used to override the default name and/or type of a property related to a database column, 
or to specify a type converter for it.

It can also be used to specify the use of a sequence to generate values for the column, or to specify the cycling 
values for a version column used for optimistic locking.

## Attributes

This tag can include the following attributes:

| Attribute | Description | Defaults to |
| -- | -- | -- |
| `name` | The database column name | Required |
| `java-name` | Overrides the default Java property name | Rule from `<name-solver>` or camel-case name |
| `java-type` | Overrides the default Java property type.  Mutually exclusive with `converter` | Rule from `<type-solver>` or default database type |
| `converter` | Defines a converter for the column. See [`<converter>`](converter.md). Mutually exclusive with `java-type` | No conversion |
| `jdbc-type` | Overrides the JDBC type for inserting or updating nulls in the database [^1] | Default database JDBC type |
| `sequence` | Specifies the column value is generated by a sequence during `INSERT`s | N/A |
| `catalog` | The catalog of the sequence (if any) | N/A |
| `schema` | The schema of the sequence (if any) | N/A |
| `is-lob`  | Influences the reading and writing strategies of a LOB | N/A |
| `initial-value` | Overrides initial value for [optimistic locking](./version-control-column.md) | According to the database type |
| `min-value` | Overrides minimum value for [optimistic locking](./version-control-column.md) | According to the database type |
| `max-value` | Overrides maximum value for [optimistic locking](./version-control-column.md) | According to the database type |

[^1]: This is a requirement of the JDBC spec where each nulls needs to have a type when applied as a query parameter. See [java.sql.Types](https://docs.oracle.com/javase/8/docs/api/java/sql/Types.html) for a list of valid types.


## Applying a Custom Name or Type

By default, VO properties' names and types are automatically generated by HotRod according to default rules:

- Property names take the form of a camel-case based on the database name. They can be changed according to extra rules speficied by the [Name Solver](./name-solver.md).
- Property types are generated according to the specific database (See [Supported Databases](../supported-databases.md)). They can be changed by rules specified
by the [Type Solver](./type-solver.md).

Nonetheless, if the name or type of the VO property produced by the rules above is not suitable for the application, it's possible to change either of them by 
adding one or more `<column>` tags in the `<table>` declaration.

For example, if the following table is created (PostgreSQL) as:

```sql
create table invoice (
  id int primary key not null,
  ux_pre_tax_amt decimal(10, 2),
  tax_percent decimal(6, 4),
  created_at timestamp,
  status int check (status in (1, 2, 5, 6))
)
```

By default HotRod will generate the following columns and types:

| Database Column | VO Property Name | VO Property Type |
| -- | -- | -- |
| `ID` | `id` | `Integer` |
| `CREATED_AT` | `createdAt` | `java.sql.Timestamp` |
| `TAX_PCT` | `taxPct` | `java.math.BigDecimal` |
| `UX_TOT_TAX_AMT` | `uxTotTaxAmt` | `java.math.BigDecimal` |
| `STATUS` | `status | `String` |

If we wanted to override these names and types and decided for:
- `CREATED_AT` as `java.time.LocalDateTime`.
- `TAX_PC` with the property name `taxPercent`.
- `UX_TOT_TAX_AMT` with the property name `totalAmount` and type `Double`.
- `STATUS` to be represented by a Java enum (maybe with values `CREATED`, `APPROVED`, `REJECTED`, `PAID`).

We can use `<column>` tags to set them as needed:

```xml
  <table name="invoice">
    <column name="created_at" java-type="java.time.LocalDateTime" />
    <column name="tax_pct" java-name="taxPercent" />
    <column name="ux_tot_tax_amt" java-name="totalAmount" java-type="Double" />
    <column name="status" converter="invoiceStatusConverter" />
  </table>
```

The columns that are not mentioned are not affected and their names and types use the default rules. Note,
also, that changes can be combined in the same tag, as shown for the column `UX_TOT_TAX_AMT` that sets its
name and type.

By specifying names and tags this way the resulting VO will include the following properties.

| Database Column | VO Property Name | VO Property Type |
| -- | -- | -- |
| `ID` | `id` | `Integer` |
| `CREATED_AT` | `createdAt` | `java.time.LocalDateTime` *changed* |
| `TAX_PCT` | `taxPercent` *changed* | `java.math.BigDecimal` |
| `UX_TOT_TAX_AMT` | `totalAmount` *changed* | `Double` *changed* |
| `STATUS` | `status` | (now uses the `invoiceStatusConverter` converter) *changed* |


Finally, the `jdbc-type` is rarely used, but can become handy for exotic types or when using old JDBC drivers that do
not know how to deal with these uncommon or new column types. For example, when trying to insert a GEOMETRY value with an old
driver or when inserting an UUID value that needs to use the `BINARY` when inserting but the default type `OBJECT` when reading.








