## Structured Selects

Nitro Structured Selects enhance the flat select model by adding a structure to the result set. Instead of
a list of VOs, these queries can return fully named, fully typed tuples of VOs and also graphs of VOs.

The resulting data structure depends on the tags used to model the select list of the query.

The main difference between a Flat Select and a Structured Select is that instead of a flat list of columns 
in the `SELECT` clause, the Structured Select includes a `<columns>` tag that defines a more valuable data 
structure.


## Example

The following query joins several tables to produce a result set of rows. The persistence layer receives the
data rows and loads them into a tree-like data structure automatically, as defined by the `<collection>` 
and `<association>` tags:

```xml
<select method="retrieveOrderProducts">
  <parameter name="categoryId" java-type="Integer" />
  select
    <columns>
      <vo table="orders" extended-vo="OrderWithProductsVO" alias="o">
        <collection table="product" property="products" alias="p" />
        <association table="region" property="region" alias="r" />
      </vo>
    </columns>
  from orders o
  join region r on o.region_id = r.id
  join order_product op on op.order_id = o.id
  join product p on p.product_id = op.product_id
  where p.category_id = #{categoryId}
  order by o.id
</select>
```

The query leverages the existing VOs (`ProductVO` and `RegionVO`) related to the included entities and creates 
new VOs as needed (`OrderWithProductsVO`) by the data graph. 

Each `OrderWithProductsVO` includes a of `List<ProductVO>` and a single `RegionVO`. The Java method generated by
this query looks like:

```java
public List<OrderWithProductsVO> retrieveOrderProducts(Integer categoryId) { ... }
```

Notice there's probably no 1:M relationship between the entities `orders` and `product` in the database. However, 
for query purposes they do have this 1:M relationship, and the resulting graph is modeled accordingly.


## Parameters

Structured Selects follow the same rules as flat Selects. They use the `<parameter>` and `<complement>` tags in the same way. 
See [Query Parameters](nitro-parameters.md) for details and examples.  


## Value Object Modeling

HotRod models VOs using two classes to allow the developer to add custom behavior to the value
objects while allowing automatic structure updates at the same time. See 
[Value Object Modeling](../crud/value-object-modeling.md) for details.


## Native SQL

All native SQL statements are supported to take full advantage of the database dialect features.


## Dynamic SQL

Structured selects can be enhanced with [Dynamic SQL](nitro-dynamic-sql.md). Dynamic SQL allows the query to 
include or exclude fragments of the SQL statement at runtime, based on the values of the supplied parameters.


## Query Return Mode

Unlike Flat Selects, Structured Selects only return lists and the query return mode cannot be selected.


## Types of Structured Selects

By assembling different inner tags the `<columns>` tag can produce different variations for structured selects:

- [Single VOs per Row](./single-vo-per-row.md).
- [Multiple VOs per Row](./multiple-vos-per-row.md).
- [Extra Expressions](./extra-expressions.md).
- [Collections](./collections.md).
- [Nested Collections](./nested-collections.md).
- [Associations](./associations.md).
- [Combining Collections and Associations](./combining-collections-and-associations.md).
- [Combining All Features](./combining-all-features.md).






