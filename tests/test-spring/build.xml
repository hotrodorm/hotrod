<project name="ccat" basedir="." default="deploy">

  <target name="clean">
  	<mkdir dir="build/java" />
    <delete includeemptydirs="true">
      <fileset dir="build" includes="**/*" />
    </delete>
  	<mkdir dir="build/java" />
  </target>

  <target name="compile" depends="clean">
    <javac destdir="build/java"
           includes="**/*.java"
           debug="true"
           source="1.8"
           target="1.8"
           includeantruntime="false"
           fork="true"
           deprecation="true">
      <src path="src/main/java" />
      <classpath>
      	<fileset dir="lib" />
      	<fileset dir="libc" />
      </classpath>
    </javac>
  </target>
	
  <target name="war" depends="compile">
  	<war destfile="build/app.war" webxml="webcontent/WEB-INF/web.xml">
      <lib file="lib/*.jar" />
      <fileset dir="webcontent">
        <exclude name="WEB-INF/web.xml" />
      </fileset>
      <classes dir="build/java" />
      <metainf file="conf/context.xml" />
  	</war>
  </target>
	
  <target name="deploy" depends="war">
    <delete includeemptydirs="true">
      <fileset dir="/home/valarcon/apps/apache-tomcat-7.0.67-xc/webapps" includes="**/*" />
    </delete>
  	<!--
    -->
    <copy file="schema.sql" todir="/home/valarcon/apps/apache-tomcat-7.0.67-xc" />
    <copy file="build/app.war" tofile="/home/valarcon/apps/apache-tomcat-7.0.67-xc/webapps/app.war" />
  </target>

</project>
