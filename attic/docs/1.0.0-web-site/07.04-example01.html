<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="styles/lightweight.css">

<script src="jquery/jquery-3.1.1.min.js"></script>

<link rel="stylesheet" href="highlight/styles/vs.css">
<script src="highlight/highlight.pack.js"></script>
<script>
  $(document).ready(function() {
    $('pre').each(function(i, block) {
      hljs.highlightBlock(block);
    });
  });
</script>

</head>
<body>

  <table>
    <tr>
      <td><img src="images/hotrod-logo-70.png"
        style="display: inline;" /></td>
      <td>
        <p style="font-size: 30px; margin: 0; padding-left: 15px;">Advanced
          Database Persistence for Java</p>
        <p style="font-size: 18px; margin: 0; padding-left: 15px;">Examples
          &amp; Reference Manual</p>
      </td>
    </tr>
  </table>

  <div
    style="width: 100%; border-bottom: 2px solid #c0c0c0; font-size: 6px;">&nbsp;</div>

  <div>

    <ul class="menu">
      <li><a href="01-welcome-to-hotrod.html">Welcome to
          HotRod!</a></li>
      <li><a href="02-apache-2.0-license.html">Apache 2.0
          License</a></li>
      <li><a href="03-downloads.html">Downloads</a></li>
      <li><a href="04-hello-world-mybatis.html">Hello World
          MyBatis!</a></li>
      <li><a href="05-source-code.html">Source Code</a></li>
      <li><a href="06.1-ant-task.html">Ant Task</a></li>
      <li><a href="06.2-development-acceleration.html">Development
          Acceleration Using Hotrod</a></li>
      <li><a href="07.01-mybatis-generator.html">MyBatis
          Generator</a></li>
      <li class="menu2"><a href="07.02-mybatis-cheat-sheet.html">MyBatis
          Cheat Sheet</a></li>
      <li class="menu2"><a
        href="07.03-how-to-run-the-examples.html">How to Run the
          Examples</a></li>
      <li class="menu2"><a class="active"
        href="07.04-example01.html">Example 1 - Basic CRUD
          Operations on Tables</a></li>
      <li class="menu2"><a href="07.04-example02.html">Example
          2 - Using Sequences &amp; Identity PKs</a></li>
      <li class="menu2"><a href="07.04-example03.html">Example
          3 - Select by Example</a></li>
      <li class="menu2"><a href="07.04-example04.html">Example
          4 - Update by Example</a></li>
      <li class="menu2"><a href="07.04-example05.html">Example
          5 - Delete by Example</a></li>
      <li class="menu2"><a href="07.04-example06.html">Example
          6 - Navigating Foreign Keys</a></li>
      <li class="menu2"><a href="07.04-example07.html">Example
          7 - Select by Unique Indexes</a></li>
      <li class="menu2"><a href="07.04-example08.html">Example
          8 - Selecting on Views</a></li>
      <li class="menu2"><a href="07.04-example09.html">Example
          9 - Retrieving Sequence Values</a></li>
      <li class="menu2"><a href="07.04-example10.html">Example
          10 - Regular SQL Queries</a></li>
      <li class="menu2"><a href="07.04-example11.html">Example
          11 - Custom DAOs</a></li>
      <li class="menu2"><a href="07.04-example12.html">Example
          12 - Regular SQL Selects</a></li>
      <li class="menu2"><a href="07.04-example13.html">Example
          13 - Native SQL</a></li>
      <li class="menu2"><a href="07.04-example14.html">Example
          14 - Dynamic SQL</a></li>
      <li class="menu2"><a href="07.04-example15.html">Example
          15 - Transactions &amp; Isolation Levels</a></li>
      <li class="menu2"><a href="07.04-example16.html">Example
          16 - Optimistic Locking (Row Version Control)</a></li>
      <li class="menu2"><a href="07.04-example17.html">Example
          17 - Custom DAO Class Names</a></li>
      <li class="menu2"><a href="07.04-example18.html">Example
          18 - Custom DAO Property Names</a></li>
      <li class="menu2"><a href="07.04-example19.html">Example
          19 - Custom DAO Property Java Types</a></li>
      <li class="menu2"><a href="07.04-example20.html">Example
          20 - Fragments</a></li>
      <li class="menu2"><a href="07.04-example21.html">Example
          21 - Facets</a></li>
      <li class="menu2"><a href="07.04-example22.html">Example
          22 - Including Existing MyBatis Mappers</a></li>
      <li><a href="09-project-setup.html">Project Setup</a></li>
      <li><a href="10-database-support.html">Supported
          Databases &amp; Column Types</a></li>
      <li class="menu2"><a href="10.01-oracle.html">Oracle
          Database</a></li>
      <li class="menu2"><a href="10.02-db2.html">IBM DB2</a></li>
      <li class="menu2"><a href="10.03-sapase.html">SAP ASE /
          Sybase</a></li>
      <li class="menu2"><a href="10.04-sqlserver.html">Microsoft
          SQL Server</a></li>
      <li class="menu2"><a href="10.05-postgresql.html">PostgreSQL</a></li>
      <li class="menu2"><a href="10.06-mysql.html">MySQL</a></li>
      <li class="menu2"><a href="10.07-mariadb.html">MariaDB</a></li>
      <li class="menu2"><a href="10.08-hypersql.html">HyperSQL
          (HSQLDB)</a></li>
      <li class="menu2"><a href="10.09-h2.html">H2</a></li>
      <li><a href="11.01-configuration-reference.html">Configuration
          Reference</a></li>
      <li class="menu2"><a href="11.02-mybatis-generator.html">MyBatis
          Generator</a></li>
      <li class="menu2"><a href="11.04-tables.html">Tables</a></li>
      <li class="menu2"><a href="11.05-columns.html">Columns</a></li>
      <li class="menu2"><a href="11.06-sequences.html">Sequences</a></li>
      <li class="menu2"><a href="11.07-sql-queries.html">SQL
          Queries</a></li>
      <li class="menu2"><a href="11.08-views.html">Views</a></li>
      <li class="menu2"><a href="11.09-sql-selects.html">SQL
          Selects</a></li>
      <li class="menu2"><a href="11.10-dynamic-sql.html">Dynamic
          SQL</a></li>
      <li class="menu2"><a href="11.11-custom-daos.html">Custom
          DAOs </a></li>
      <li class="menu2"><a href="11.12-fragments.html">Fragments</a></li>
      <li class="menu2"><a href="11.13-facets.html">Facets</a></li>
      <li class="menu2"><a href="11.14-existing-mybatis-mappers.html">Existing
          MyBatis Mappers</a></li>
      <li><a href="12-faq.html">FAQ</a></li>
    </ul>

    <div class="article">

      <!-- ============= -->
      <!-- Article Begin -->
      <!-- ============= -->

      <h1>Example 1 - CRUD Operations on Tables</h1>

      <p>This example shows the basic out-of-the-box CRUD (create,
        read, update, delete) operations on a table of the database.
        This example shows how to operate on single rows identifying
        them by the PK (primary key) of the table; the PK is
        auto-generated as an identity key.</p>

      <p>However, if the table did not have a PK, then only the
        insert operation would be available and the options to perform
        select, update, and delete would be more limited. We could still
        use the out-of-the-box select, update, and delete &ldquo;by
        example&rdquo; operations described on examples further on.</p>

      <h2>DAO/VO class and its properties</h2>

      <p>For each table Hotrod generates a DAO class that combines
        the DAO pattern (persistence methods) with the VO pattern (value
        object that represents a row of a table).</p>

      <p>
        This example uses the
        <code>VEHICLE</code>
        table to demonstrate the basic CRUD operations. HotRod created a
        DAO class
        <code>VehicleDAO</code>
        for this table. Its name is configurable but defaults to the
        table name with the DAO suffix.
      </p>

      <p>For each table column this class includes a property with a
        name and a specific Java type. Both are configurable: the name
        defaults to the column name in Java format, an the Java type
        defaults to a suitable Java type for each column. This Java type
        heavily depends on the specifics of the RDBMS.</p>

      <h2>How to Run this example</h2>

      <p>
        The <strong>Example 01</strong> is included in the download
        package. To run this example please refer to the section <a
          href="http://How to Run the Examples">How to Run the
          Examples</a> above.<br />
      </p>

      <h2>Insert</h2>

      <p>
        In this example, the section below shows how to insert a new row
        in the table
        <code>VEHICLE</code>
        :
      </p>

      <pre class="java">    VehicleDAO skoda = new VehicleDAO();
    skoda.setBrand("Skoda");
    skoda.setModel("Octavia");
    skoda.setUsed(false);
    skoda.setCurrentMileage(7);
    skoda.setPurchasedOn(new Date(System.currentTimeMillis()));
    int rows = skoda.insert();
    System.out.println("New vehicle Skoda added. New ID=" + skoda.getId()
      + ". Rows inserted=" + rows);</pre>

      <p>
        The
        <code>insert()</code>
        method is always available, regardless if the table has or has
        not a PK: you can always insert.
      </p>

      <p>
        It first instantiates a new object of the class
        <code>VehicleDAO</code>
        , then it set the property values for the row we want to insert,
        and finally it performs the
        <code>insert()</code>
        operation.
      </p>

      <p>There are a few things to note here:</p>

      <ul>
        <li>This example does not include any transaction
          demarcation (begin transaction and commit transaction). When
          no transaction demarcation is specified, each database
          operation commits automatically.</li>
        <li>The PK property <code>ID</code> was not set before
          inserting the row. Since HotRod was configured to treat this
          column as auto-generated its value is ignored while inserting
          and is populated right after the insert. In this case, the PK
          <code>ID</code> has the value of the newly inserted PK.
        </li>
        <li>The <code>insert()</code> method returns the number of
          affected rows.
        </li>
        <li>If the <code>insert()</code> operation fails by any
          reason an Exception is thrown. By default the checked <code>SQLException</code>
          is thrown, but can be also configured to throw the unchecked
          Mybatis <code>PersistenceException</code>. See the MyBatis
          Generator Options section.
        </li>
      </ul>

      <h2>Select by PK</h2>

      <p>In this example, the section below shows how to select a
        row using the PK.</p>

      <pre class="java">    VehicleDAO delorean = VehicleDAO.select(3);</pre>

      <p>
        If the table has a PK, the DAO includes the
        <code>select()</code>
        method that retrieves a row by a PK value. This method is not
        present if the table does not have a PK.
      </p>

      <p>There are a few things to note here:</p>

      <ul>
        <li>The <code>select()</code> method is static, so it&#39;s
          used from the DAO class itself.
        </li>
        <li>The <code>select()</code> method parameters are the PK
          values. For a composite PK, multiple parameters are used as
          needed.
        </li>
        <li>The <code>select()</code> method returns a single DAO
          object. If no row is found for the specified PK a null is
          returned.
        </li>
        <li>If the <code>select()</code> operation fails by any
          reason an Exception is thrown. By default the checked <code>SQLException</code>
          is thrown, but can be also configured to throw the unchecked
          Mybatis <code>PersistenceException</code>. See the MyBatis
          Generator Options section.
        </li>
      </ul>

      <h2>Update by PK</h2>

      <p>In this example, the section below shows how to update a
        row using the PK.</p>

      <pre class="java">    VehicleDAO delorean = VehicleDAO.select(3);

    // Update by PK: set the mileage of the DeLorean to 270500

    if (delorean != null) {
      delorean.setCurrentMileage(270500);
      rows = delorean.update();
      System.out.println("DeLorean updated. Rows updated=" + rows);
    } else {
      System.out.println("Could not update DeLorean. Car not found.");
    }</pre>

      <p>
        If the table has a PK, the DAO includes the
        <code>update()</code>
        method that updates a row by the PK value. This method is not
        present if the table does not have a PK. The key section of this
        example are the two lines:
      </p>

      <pre class="java">      delorean.setCurrentMileage(270500);
      rows = delorean.update();</pre>

      <p>This example retrieved a row using a Select by PK method
        (example above), then modified one property, and finally updated
        the row.</p>

      <p>There are a few things to note here:</p>

      <ul>
        <li>The <code>update()</code> method is not static. It
          operates on an object, not the class itself. All the non-PK
          columns (properties) are updated into the database row,
          including the unmodified properties.
        </li>
        <li>In this example, since some time passes between the <code>select()</code>
          and <code>update()</code> operations, it&#39;s technically
          possible that the table row could have been updated in the
          mean time by another process or thread. If so, the <code>update()</code>
          operation will override the other process&#39; values,
          effectively losing that information. To deal with this
          problem, you can use the pessimistic locking strategy (row
          locks or table locks), or use optimistic locking strategy (Row
          Version Control). The latter is implemented by HotRod and is
          described later in the section <a
          href="http://Optimistic Locking (Row Version Control)">Optimistic
            Locking (Row Version Control)</a>.
        </li>
        <li>This example does not include any transaction
          demarcation (begin transaction and commit transaction). When
          no transaction demarcation is specified, each database
          operation commits automatically.</li>
        <li>The <code>update()</code> method returns the number of
          affected rows. If there&#39;s no row for the specified PK
          values, it returns a zero.
        </li>
        <li>If the <code>update()</code> operation fails by any
          reason an Exception is thrown. By default the checked <code>SQLException</code>
          is thrown, but can be also configured to throw the unchecked
          Mybatis <code>PersistenceException</code>. See the MyBatis
          Generator Options section.
        </li>
      </ul>

      <h2>Delete By PK</h2>

      <p>In this example, the section below shows how to delete a
        row using the PK.</p>

      <pre class="java">    VehicleDAO toyota = new VehicleDAO();
    toyota.setId(2);
    rows = toyota.delete();</pre>

      <p>
        If the table has a PK, the DAO includes the
        <code>delete()</code>
        method that deleted a row by the PK value. This method is not
        present if the table does not have a PK.
      </p>

      <p>
        It first uses an object of the class
        <code>VehicleDAO</code>
        , the sets the PK columns (one or more), and finally deletes the
        row.
      </p>

      <p>There are a few things to note here:</p>

      <ul>
        <li>The <code>delete()</code> method is not static. It
          operates on an object, not the class itself. Only the PK
          columns are used. All other columns are ignored.
        </li>
        <li>This example does not include any transaction
          demarcation (begin transaction and commit transaction). When
          no transaction demarcation is specified, each database
          operation commits automatically.</li>
        <li>The <code>delete()</code> method returns the number of
          affected rows. If there&#39;s no row for the specified PK
          values, it returns a zero.
        </li>
        <li>If the <code>delete()</code> operation fails by any
          reason an Exception is thrown. By default the checked <code>SQLException</code>
          is thrown, but can be also configured to throw the unchecked
          Mybatis <code>PersistenceException</code>. See the MyBatis
          Generator Options section.
        </li>
      </ul>

      <p>&nbsp;</p>

      <!-- =========== -->
      <!-- Article End -->
      <!-- =========== -->

    </div>

  </div>

</body>
</html>