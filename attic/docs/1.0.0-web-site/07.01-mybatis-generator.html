<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="styles/lightweight.css">

<script src="jquery/jquery-3.1.1.min.js"></script>

<link rel="stylesheet" href="highlight/styles/vs.css">
<script src="highlight/highlight.pack.js"></script>
<script>
  $(document).ready(function() {
    $('pre').each(function(i, block) {
      hljs.highlightBlock(block);
    });
  });
</script>

</head>
<body>

  <table>
    <tr>
      <td><img src="images/hotrod-logo-70.png"
        style="display: inline;" /></td>
      <td>
        <p style="font-size: 30px; margin: 0; padding-left: 15px;">Advanced
          Database Persistence for Java</p>
        <p style="font-size: 18px; margin: 0; padding-left: 15px;">Examples
          &amp; Reference Manual</p>
      </td>
    </tr>
  </table>

  <div
    style="width: 100%; border-bottom: 2px solid #c0c0c0; font-size: 6px;">&nbsp;</div>

  <div>

    <ul class="menu">
      <li><a href="01-welcome-to-hotrod.html">Welcome to
          HotRod!</a></li>
      <li><a href="02-apache-2.0-license.html">Apache 2.0
          License</a></li>
      <li><a href="03-downloads.html">Downloads</a></li>
      <li><a href="04-hello-world-mybatis.html">Hello World
          MyBatis!</a></li>
      <li><a href="05-source-code.html">Source Code</a></li>
      <li><a href="06.1-ant-task.html">Ant Task</a></li>
      <li><a href="06.2-development-acceleration.html">Development
          Acceleration Using Hotrod</a></li>
      <li><a class="active" href="07.01-mybatis-generator.html">MyBatis
          Generator</a></li>
      <li class="menu2"><a href="07.02-mybatis-cheat-sheet.html">MyBatis
          Cheat Sheet</a></li>
      <li class="menu2"><a
        href="07.03-how-to-run-the-examples.html">How to Run the
          Examples</a></li>
      <li class="menu2"><a href="07.04-example01.html">Example
          1 - Basic CRUD Operations on Tables</a></li>
      <li class="menu2"><a href="07.04-example02.html">Example
          2 - Using Sequences &amp; Identity PKs</a></li>
      <li class="menu2"><a href="07.04-example03.html">Example
          3 - Select by Example</a></li>
      <li class="menu2"><a href="07.04-example04.html">Example
          4 - Update by Example</a></li>
      <li class="menu2"><a href="07.04-example05.html">Example
          5 - Delete by Example</a></li>
      <li class="menu2"><a href="07.04-example06.html">Example
          6 - Navigating Foreign Keys</a></li>
      <li class="menu2"><a href="07.04-example07.html">Example
          7 - Select by Unique Indexes</a></li>
      <li class="menu2"><a href="07.04-example08.html">Example
          8 - Selecting on Views</a></li>
      <li class="menu2"><a href="07.04-example09.html">Example
          9 - Retrieving Sequence Values</a></li>
      <li class="menu2"><a href="07.04-example10.html">Example
          10 - Regular SQL Queries</a></li>
      <li class="menu2"><a href="07.04-example11.html">Example
          11 - Custom DAOs</a></li>
      <li class="menu2"><a href="07.04-example12.html">Example
          12 - Regular SQL Selects</a></li>
      <li class="menu2"><a href="07.04-example13.html">Example
          13 - Native SQL</a></li>
      <li class="menu2"><a href="07.04-example14.html">Example
          14 - Dynamic SQL</a></li>
      <li class="menu2"><a href="07.04-example15.html">Example
          15 - Transactions &amp; Isolation Levels</a></li>
      <li class="menu2"><a href="07.04-example16.html">Example
          16 - Optimistic Locking (Row Version Control)</a></li>
      <li class="menu2"><a href="07.04-example17.html">Example
          17 - Custom DAO Class Names</a></li>
      <li class="menu2"><a href="07.04-example18.html">Example
          18 - Custom DAO Property Names</a></li>
      <li class="menu2"><a href="07.04-example19.html">Example
          19 - Custom DAO Property Java Types</a></li>
      <li class="menu2"><a href="07.04-example20.html">Example
          20 - Fragments</a></li>
      <li class="menu2"><a href="07.04-example21.html">Example
          21 - Facets</a></li>
      <li class="menu2"><a href="07.04-example22.html">Example
          22 - Including Existing MyBatis Mappers</a></li>
      <li><a href="09-project-setup.html">Project Setup</a></li>
      <li><a href="10-database-support.html">Supported
          Databases &amp; Column Types</a></li>
      <li class="menu2"><a href="10.01-oracle.html">Oracle
          Database</a></li>
      <li class="menu2"><a href="10.02-db2.html">IBM DB2</a></li>
      <li class="menu2"><a href="10.03-sapase.html">SAP ASE /
          Sybase</a></li>
      <li class="menu2"><a href="10.04-sqlserver.html">Microsoft
          SQL Server</a></li>
      <li class="menu2"><a href="10.05-postgresql.html">PostgreSQL</a></li>
      <li class="menu2"><a href="10.06-mysql.html">MySQL</a></li>
      <li class="menu2"><a href="10.07-mariadb.html">MariaDB</a></li>
      <li class="menu2"><a href="10.08-hypersql.html">HyperSQL
          (HSQLDB)</a></li>
      <li class="menu2"><a href="10.09-h2.html">H2</a></li>
      <li><a href="11.01-configuration-reference.html">Configuration
          Reference</a></li>
      <li class="menu2"><a href="11.02-mybatis-generator.html">MyBatis
          Generator</a></li>
      <li class="menu2"><a href="11.04-tables.html">Tables</a></li>
      <li class="menu2"><a href="11.05-columns.html">Columns</a></li>
      <li class="menu2"><a href="11.06-sequences.html">Sequences</a></li>
      <li class="menu2"><a href="11.07-sql-queries.html">SQL
          Queries</a></li>
      <li class="menu2"><a href="11.08-views.html">Views</a></li>
      <li class="menu2"><a href="11.09-sql-selects.html">SQL
          Selects</a></li>
      <li class="menu2"><a href="11.10-dynamic-sql.html">Dynamic
          SQL</a></li>
      <li class="menu2"><a href="11.11-custom-daos.html">Custom
          DAOs </a></li>
      <li class="menu2"><a href="11.12-fragments.html">Fragments</a></li>
      <li class="menu2"><a href="11.13-facets.html">Facets</a></li>
      <li class="menu2"><a href="11.14-existing-mybatis-mappers.html">Existing
          MyBatis Mappers</a></li>
      <li><a href="12-faq.html">FAQ</a></li>
    </ul>

    <div class="article">

      <!-- ============= -->
      <!-- Article Begin -->
      <!-- ============= -->

      <h1>MyBatis Generator</h1>

      <p>HotRod&#39;s MyBatis Generator produces all necessary files
        that MyBatis needs to connect and operate on a database. The
        developer provides the list of tables, views, SQL selects, and
        SQL queries he/she wants to use and HotRod takes care of the
        rest.</p>

      <p>However, it&#39;s necessary to have a basic understanding
        on how MyBatis works. The MyBatis web site can help explaining
        the details on how MyBatis works, the Java classes, and the
        mappers. In short, MyBatis is a lightweight library that
        executes SQL queries and maps Java POJOs into SQL parameters
        back and forth.</p>

      <p>The main strategy the HotRod&#39;s MyBatis Generator uses
        is to generate one DAO per database table, database view,
        arbitrary SQL select statement, and custom DAO definition. Each
        DAO class doubles as a VO since it includes all the table
        columns as properties with their corresponding getters and
        setters. Apart from the DAO classes it also produces all the
        corresponding MyBatis mapper files, and the main MyBatis
        configuration file, all of them ready to use.</p>

      <h2>The DAO Java Classes</h2>

      <p>
        All DAOs are specified in the configuration file for tables,
        views, SQL select, and custom DAO using the tags
        <code>&lt;table&gt;</code>
        ,
        <code>&lt;view&gt;</code>
        ,
        <code>&lt;select&gt;</code>
        , and
        <code>&lt;dao&gt;</code>
        accordingly. See the Reference section of the online manual for
        details.
      </p>

      <p>Database tables generate DAO classes that have static
        methods used to retrieve database rows in the form of single or
        lists of DAOs. These DAOs also offers regular (non-static)
        methods the objects (table rows) can call to perform tasks such
        as inserting a row, updating it, or retrieving FK-related rows
        from another table, once you have retrieved table rows.</p>

      <p>The same strategy also works well for views. Database views
        also produce DAO Java classes. These ones are, however, more
        limited since views are treated as a read only database objects.
        Only static methods are provided to retrieve data, but no
        update, insert, or delete operations are available. In essence
        DAO produced from views are much simpler than DAOs produced from
        tables.</p>

      <p>
        DAOs are also produced from for arbitrary SQL select statements.
        Since SQL select statements produce table-like readable data
        they behave in a very similar way compared to views. These DAO
        are, however, much more limited than the ones generated from
        tables and views. Apart from the setters and getters they only
        offer a single method
        <code>select()</code>
        . This method executes the specified SQL select statement and
        returns a list of DAOs.
      </p>

      <p>
        All these DAO definitions included in the configuration file can
        also include in their body multiple optional entries to access
        database sequence values using the tag
        <code>&lt;sequence&gt;</code>
        tag and/or to execute arbitrary SQL updates using the tag
        <code>&lt;update&gt;</code>
        tag. These entries generate DAO static methods to perform these
        activities.
      </p>

      <p>
        Finally, the configuration file can also specify custom DAOs,
        using the
        <code>&lt;dao&gt;</code>
        tag, that do not relate to any database object or SQL select,
        but that only group
        <code>&lt;sequence&gt;</code>
        and
        <code>&lt;update&gt;</code>
        tags. The DAO generated Java class does not have any properties
        setters or getters, but only methods corresponding to the
        <code>&lt;sequence&gt;</code>
        and
        <code>&lt;update&gt;</code>
        tags.
      </p>

      <h3>The DAO Primitives class vs the DAO class</h3>

      <p>There&#39;s one more key design strategy on the DAO Java
        classes. HotRod actually generates two Java classes per each
        DAO: first, the &quot;DAO Primitives&quot; class is an abstract
        Java class that includes all database logic HotRod can automate;
        second, the &quot;DAO&quot; is a concrete class that extends
        from the DAO Primitives class and is initially empty. The former
        is never referenced from the application; only the normal DAO
        is, and all methods are available in it since it extends from
        the DAO Primitives.</p>

      <p>This separation of the DAOs in two Java classes offers one
        key benefit. Since the DAO Primitives class does not include any
        custom code, it is safely rewritten and updated by HotRod every
        time the database changes and the code is regenerated. This way
        all the DAO database related methods are always up to date to
        the latest changes.</p>

      <p>The normal DAO class, however, is generated once by HotRod
        and never rewritten. The developer can add custom logic to the
        Normal DAOs for any purposes he/she deems necessary. HotRod
        never touches this class so it&#39;s always safe to perform a
        code re-generation when needed. The developer can add any custom
        logic in it, usually persistence level logic or data
        manipulation logic.</p>

      <h3>The DAO Properties and Methods</h3>

      <p>
        Each DAO generated for a
        <code>&lt;table&gt;</code>
        tag includes:
      </p>

      <ul>
        <li>One class property for each table column.</li>
        <li>All getters and setters for each property.</li>
        <li>A <code>select()</code> method that selects a row by
          primary key&mdash;only if the table has a primary key.
        </li>
        <li>An <code>insert()</code> method that inserts a row into
          the table.
        </li>
        <li>An <code>update()</code> method that updates the row by
          primary key&mdash;only if the table has a primary key.
        </li>
        <li>A <code>delete()</code> method that deletes a row by
          primary key&mdash;only if the table has a primary key.
        </li>
        <li>The <code>selectByUI...()</code> methods&mdash;for each
          unique index the table has. These methods retrieve a row using
          the corresponding unique index. To differentiate these methods
          their names append the list of columns included on each unique
          index.
        </li>
        <li>The static <code>selectByExample()</code>, <code>updateByExample()</code>,
          and <code>deleteByExample()</code> methods. These methods are
          always included. They retrieve, update, or delete multiples
          rows at a time.
        </li>
        <li>The s<code>electChildren...().by...()</code> and <code>selectParent...().by...()</code>
          methods. These methods allows you to retrieve related DAO
          objects using the foreign keys defined for the table. There
          are as many methods as imported and exported foreign keys the
          table has. To differentiate their names the <code>selectChildren...()</code>
          and <code>selectParent...()</code> methods append the name of
          the related table the foreign key is linked to (including self
          references). Then the subsequent method <code>by...()</code>
          appends the list of column names the foreign key uses to
          reference the related table.
        </li>
        <li>A static method produced for each embedded <code>&lt;sequence&gt;</code>
          tag, as in <code>selectSequence...()</code>.
        </li>
        <li>A static method produced for each embedded <code>&lt;update&gt;</code>
          tag.
        </li>
        <li>A <code>getTxManager()</code> method for transaction
          management, an <code>enum</code> with all default sort orders,
          and a <code>toString()</code> method.
        </li>
      </ul>

      <p>
        Each DAO generated for a
        <code>&lt;view&gt;</code>
        tag includes:
      </p>

      <ul>
        <li>One class property for each view column.</li>
        <li>All getters and setters for each property.</li>
        <li>The static <code>selectByExample()</code> method.
        </li>
        <li>A static method produced for each embedded <code>&lt;sequence&gt;</code>
          tag, as in <code>selectSequence...()</code>.
        </li>
        <li>A static method produced for each embedded <code>&lt;update&gt;</code>
          tag.
        </li>
        <li>A <code>getTxManager()</code> method for transaction
          management, an <code>enum</code> with all default sort orders,
          and a <code>toString()</code> method.
        </li>
      </ul>

      <p>
        Each DAO generated for a
        <code>&lt;select&gt;</code>
        tag includes:
      </p>

      <ul>
        <li>One class property for each resulting column from the
          SQL select statement.</li>
        <li>All getters and setters for each property.</li>
        <li>The static <code>select()</code> method, with all
          specified parameters.
        </li>
        <li>A <code>getTxManager()</code> method for transaction
          management and a <code>toString()</code> method.
        </li>
      </ul>

      <p>
        Each DAO generated for a
        <code>&lt;dao&gt;</code>
        tag includes:
      </p>

      <ul>
        <li>A static method produced for each embedded <code>&lt;sequence&gt;</code>
          tag, as in <code>selectSequence...()</code>.
        </li>
        <li>A static method produced for each embedded <code>&lt;update&gt;</code>
          tag.
        </li>
        <li>A <code>getTxManager()</code> method for transaction
          management.
        </li>
      </ul>

      <h3>The Mappers</h3>

      <p>For each DAO Java class a complete MyBatis mapper file is
        also produced. This file contains all the SQL statements
        necessary for each one of the DAO Java methods to work. This
        mapper file include the full list of SQL sentences needed to
        execute SQL inserts, updates, deletes, and selects on the
        specific table, view, or select. It&#39;s fully produced and
        updated by HotRod and it&#39;s not expected the developer will
        change it.</p>

      <h3>The MyBatis Configuration File</h3>

      <p>Finally, HotRod&#39;s MyBatis Generator produces a complete
        main MyBatis configuration file with the full list of MyBatis
        mapper files necessary for all the DAOs to run. This MyBatis
        Configuration file is based on a template the developer provides
        where HotRod inserts the list of mappers. The generated file is,
        therefore, ready to use in a JEE web or standalone Java
        application.</p>

      <h2>HotRod Generation Task and Configuration Files</h2>

      <p>The code generation is performed by the HotRod jar library
        executed through an Ant task. This task uses a developer
        produced configuration file (the HotRod configuration file) that
        provides configuration details to the generator.</p>

      <p>In addition to this, the developer provides the MyBatis
        Configuration file template. This file includes the full MyBatis
        configuration, except for the list of mappers that will be
        populated by HotRod.</p>

      <p>
        Finally, the developer also provides a SessionFactory singleton
        Java class that is used by all DAOs to retrieve MyBatis
        <code>SQLSession</code>
        objects. Its name and location are specified by the developer in
        HotRod&#39;s configuration file.
      </p>

      <p>As as example, the Hello World application includes all the
        files mentioned above in the following locations:</p>

      <ul>
        <li>The HotRod library <code>lib/hotrod/hotrod-1.0.0.jar</code></li>
        <li><code>hotrod</code> Ant Task included in the <code>build.xml</code>
          file</li>
        <li>HotRod Configuration File <code>hotrod.xml</code></li>
        <li>MyBatis Configuration file template <code>mybatis-template.xml</code></li>
        <li>The SessionFactory <code>java/sessionfactory/DatabaseSessionFactory.java</code></li>
      </ul>

      <h2>Generated Files Locations</h2>

      <p>As described above, HotRod generates the following files:</p>

      <ul>
        <li>DAO Java classes</li>
        <li>DAO Primitives Java classes</li>
        <li>Mappers</li>
        <li>MyBatis Configuration File</li>
      </ul>

      <p>
        The location of these files is configured through the HotRod
        configuration file. The Hello World example&#39;s
        <code>hotrod.xml</code>
        file shows the following configuration details:
      </p>

      <pre class="xml">  &lt;generators>
    &lt;mybatis>
      &lt;daos gen-base-dir="auto-generated/java" dao-package="daos" />
      &lt;mappers gen-base-dir="auto-generated/mappers" relative-dir="persistence" />
      &lt;mybatis-configuration-template file="mybatis-template.xml" />
      &lt;session-factory singleton-full-class-name="sessionfactory.DatabaseSessionFactory" />
      ...
    &lt;/mybatis>
  &lt;/generators></pre>

      <p>
        According to these values the DAO classes will be generated in
        <code>auto-generated/java/daos</code>
        . This path is composed by the base dir
        <code>auto-generated/java</code>
        and the Java package
        <code>daos</code>
        . For example, a DAO for the database table VEHICLE will have
        the package daos and will be generated as:<br />
        <code>&nbsp; auto-generated/java/daos/VehicleDAO.java</code>
      </p>

      <p>
        Similarly, the DAO Primitives classes will be generated in the
        package
        <code>primitives</code>
        inside the DAOs package. In this example the DAO Primitives Java
        class will have the package
        <code>daos/primitives</code>
        and will be generated as:<br />
        <code>&nbsp;
          auto-generated/java/daos/primitives/VehicleDAOPrimitives.java</code>
      </p>

      <p>
        The DAO Primitives will reference the Session Factory class as
        <code>sessionfactory.DatabaseSessionFactory</code>
        .
      </p>

      <p>
        The mapper files will be generated in
        <code>auto-generated/mappers/persistence</code>
        . Using the same example, the mapper file for the database table
        <code>VEHICLE</code>
        will be generated as:<br />
        <code>&nbsp;
          auto-generated/mappers/persistence/primitives/primitives-vehicle-dao.xml</code>
      </p>

      <p>
        A reference to it will be included in the MyBatis Configuration
        file using its relative name only
        <code>persistence/primitives/primitives-vehicle-dao.xml</code>
        .
      </p>

      <p>
        Finally, the MyBatis configuration file template will be read
        from
        <code>mybatis-template.xml</code>
        and the resulting fully populated file will be generated in the
        same directory as the mapper files. That is as:<br />
        <code>&nbsp;
          auto-generated/mappers/persistence/primitives/mybatis-configuration.xml</code>
      </p>

      <p>All this may initially sound quite confusing. However it
        ends up being very simple since HotRod takes care of all the
        details and references between the files.</p>

      <p>The generated classes and supporting files are fully
        functional and ready to use by your application.</p>

      <h2>Your Application</h2>

      <p>
        Once all the files are generated your Java application needs can
        simply use the DAOs to retrieve data from the database and to
        produce changes in it. For example, to insert a row in the
        <code>VEHICLE</code>
        table you could write something like:
      </p>

      <pre class="java">    VehicleDAO skoda = new VehicleDAO();
    skoda.setBrand("Skoda");
    skoda.setModel("Octavia");
    skoda.setUsed(false);
    skoda.setCurrentMileage(7);
    skoda.setPurchasedOn(new Date(System.currentTimeMillis()));
    skoda.insert();</pre>

      <p>
        The key line is the last one that executes the
        <code>insert()</code>
        , that was automatically generated by HotRod. Behind the scenes
        it performs quite a few tasks for you: first, it obtains a
        <code>SQLSession</code>
        object from the SessionFactory singleton you specified, uses all
        the DAO properties as column values, executes a SQL insert with
        them, retrieves the newly identity PK value back to the DAO
        property, and finally frees all the JDBC resources.
      </p>

      <p>See the Hello World example for more details.</p>

      <p>&nbsp;</p>


      <!-- =========== -->
      <!-- Article End -->
      <!-- =========== -->

    </div>

  </div>

</body>
</html>