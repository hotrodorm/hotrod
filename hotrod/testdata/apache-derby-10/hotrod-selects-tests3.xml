<?xml version="1.0"?>
<!DOCTYPE hotrod-fragment>

<hotrod-fragment>

  <view name="north_office">

    <!-- Case 2 - Select returns multiple VOs -->

    <select method="viewFindAccountWithPerson">

      <parameter name="clientId" java-type="java.lang.Integer" jdbc-type="NUMERIC" />

      select
      <columns vo="AccountPersonVO2">
        <vo table="account" property="account" alias="a"> a.* </vo>
        <vo table="person" property="person" alias="p"></vo>
        <expressions>
          <column name="initial_load" java-type="java.lang.Double" />
          a.balance * a.type as initial_load,
          p.id + p.type as score
        </expressions>
      </columns>
      from account a
      join person p on (p.id) = (a.person_id)
      <complement>
        <if test="clientId != null">
          where a.id = #{clientId}
        </if>
      </complement>

    </select>

  </view>

  <table name="doc_comment">

    <select method="tableFindAccountWithPerson">

      <parameter name="clientId" java-type="java.lang.Integer" jdbc-type="NUMERIC" />

      select
      <columns vo="AccountPersonVO3">
        <vo table="account" property="account" alias="a"> a.* </vo>
        <vo table="person" property="person" alias="p"></vo>
        <expressions>
          <column name="initial_load" java-type="java.lang.Double" />
          a.balance * a.type as initial_load,
          p.id + p.type as score
        </expressions>
      </columns>
      from account a
      join person p on (p.id) = (a.person_id)
      <complement>
        <if test="clientId != null">
          where a.id = #{clientId}
        </if>
      </complement>

    </select>

  </table>


</hotrod-fragment>
