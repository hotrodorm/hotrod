<?xml version="1.0"?>
<!DOCTYPE hotrod SYSTEM "hotrod.dtd">

<hotrod>

  <generators>
    <mybatis>
      <daos gen-base-dir="gen/hotrod/daos" dao-package="hotrod.test.generation" />
      <mappers gen-base-dir="gen/hotrod/mappers" relative-dir="persistence" />
      <mybatis-configuration-template file="mybatis-config-template.xml" />
      <session-factory singleton-full-class-name="sessionfactory.DatabaseSessionFactory" />
      <select-generation temp-view-base-name="mybatis_temp_view" />
    </mybatis>
  </generators>

  <table name="config_values" /> <!-- No PK -->
  <table name="properties" />
  <table name="parameters" />
  <table name="log" />

  <table name="account">
    <auto-generated-column name="id" /> <!-- identity PK -->
  </table>
  
  <table name="transaction"> <!-- Identity PK optional -->
    <auto-generated-column name="seq_id"
      allows-specified-value="true" />
    <query java-method-name="award10">
     update transaction set amount = amount + 10
    </query>
  </table>

  <table name="state_branch" />
  <table name="federal_branch" />
  <table name="client" />

  <table name="agent"> <!-- PK with sequence -->
    <auto-generated-column name="id" sequence="seq_agent" />
  </table>

  <table name="codes" column-seam="_">
    <auto-generated-column name="id" />
  </table>
  <table name="quadrant" />

  <table name="application_config" />

  <table name="types_char" />
  <table name="types_numeric" />
  <table name="types_date_time" />
  <table name="types_binary" />
  <table name="types_other" />

  <table name="special_columns" />

  <table name="vehicle" />

  <view name="tx_branch">
    <column name="amount" java-type="java.lang.Long" jdbc-type="NUMERIC" />
  </view>

  <view name="types_pseudo1" />
  <view name="types_pseudo2" />

  <select java-class-name="AccountTxDAO"><![CDATA[
    select a.* , t.*
      from account a, transaction t
      where t.account_id &lt; a.id
  ]]></select>

  <select java-class-name="AccountTx2DAO"><![CDATA[
    select a.* , t.*
      from account a, transaction t
      where t.account_id = a.id
      {*
      <if test="#{maxAmount,javaType=java.lang.Integer,jdbcType=NUMERIC} != null">
        and t.amount &lt;= #{maxAmount}
      </if>
      *}
  ]]></select>

  <select java-class-name="AccountTx3DAO"><![CDATA[
    select a.* , t.*
      from account a, transaction t
      where t.account_id = a.id
      {*
      <if test="#{maxAmount,javaType=java.lang.Integer,jdbcType=NUMERIC} != null">
        and t.amount1 &lt;= #{maxAmount} 
        and t.amount2 &lt;= #{maxAmount}
      </if>
      *}
  ]]></select>

  <select java-class-name="SelectTNumeric">
    select * from types_numeric
  </select>

  <select java-class-name="SelectTChar">
    select * from types_char
  </select>

  <select java-class-name="SelectTBinary">
    select * from types_binary
  </select>

  <select java-class-name="SelectTDateTime">
    select * from types_date_time
  </select>

  <select java-class-name="SelectTOther">
    select * from types_other
  </select>

</hotrod>
