
<select method="getHistoricTransactionsForMaxAmount"
  result-class="HistoricTransactionsForMaxAmount">
  select 
    {** property=acc, dao=account *} a.* ,
    {** property=tx, dao=transaction *} t.*
    {** properties *} (a.amount * 2 + t.amount) as total
  from transaction t
  join account a on (t.account_id) = (a.id)
  {*
  <if test="#{maxAmount,javaType=java.lang.Integer,jdbcType=NUMERIC} != null">
    and t.amount &lt;= #{maxAmount}
  </if>
  *}
</select>

<select method="getHistoricTransactionsForMaxAmount"
  result-class="HistoricTransactionsForMaxAmount">
  select
    <association name="acc" dao="account"> a.* </association>, 
    <collection name="tx" dao="transaction"> t.* </collection>, 
    <extra-properties> (a.amount * 2 + t.amount) as total </extra-properties> 
  from transaction t
  join account a on (t.account_id) = (a.id)
  <skip-inspection>
    <if test="#{maxAmount,javaType=java.lang.Integer,jdbcType=NUMERIC} != null">
      and t.amount &lt;= #{maxAmount}
    </if>
  </skip-inspection>
</select>
