<?xml version="1.0"?>
<!DOCTYPE hotrod SYSTEM "hotrod.dtd">

<hotrod>

  <generators>
    <mybatis>
      <daos gen-base-dir="auto-generated/java" dao-package="daos" />
      <mappers gen-base-dir="auto-generated/mappers"
        relative-dir="persistence" />
      <mybatis-configuration-template
        file="mybatis-template.xml" />
      <session-factory singleton-full-class-name="sessionfactory.DatabaseSessionFactory" />
      <select-generation temp-view-base-name="hotrod_temp_view" />
    </mybatis>
  </generators>

  <table name="branch">
    <auto-generated-column name="id"
      allows-specified-value="true" />
  </table>

  <table name="visit" />

  <table name="vehicle">
    <auto-generated-column name="id" />
  </table>

  <view name="car" />
  <view name="motorcycle" />
  <view name="truck" />

  <table name="client">
    <auto-generated-column name="id" sequence="client_seq" />
    <version-control-column name="row_version" />
  </table>

  <table name="purchase">
    <auto-generated-column name="id" />
  </table>

  <table name="daily_report" />

  <table name="mt_vval002" java-name="VehicleValuationDAO">
    <column name="if" java-name="valuationDate" />
    <column name="sldbrid" java-name="branchId" />
    <column name="$valuation" java-name="totalBranchValuation"
      java-type="java.lang.Double" />
  </table>

  <table name="dd2" java-name="ValuationLine">
    <column name="dif" java-name="subValuationDate" />
    <column name="qbid" java-name="subBranchId" />
  </table>

  <!-- ======================= -->
  <!-- === NOT CHECKED YET === -->
  <!-- ======================= -->

  <dao java-class-name="MyDAO">
    <query java-method-name="addFreebiesToOrders">
    <![CDATA[
      update purchase_order
        <set>
          <if test="#{discount,javaType=java.lang.Double,jdbcType=NUMERIC} != null">
            discount = #{discount}
          ,</if>
          <if test="#{extraQuantity,javaType=java.lang.Long,jdbcType=NUMERIC} != null">
            quantity = quantity + #{extraQuantity}
          ,</if>
          <if test="#{shippingType,javaType=java.lang.Integer,jdbcType=NUMERIC} != null">
            shipping_type = #{shippingType}
          ,</if>
        </set>
        <where>
          <if test="#{foodType,javaType=java.lang.Integer,jdbcType=NUMERIC} != null">
            food_type = #{foodType}
          </if>
          <if test="#{zipCode,javaType=java.lang.String,jdbcType=VARCHAR} != null">
            AND zip_code = #{zipCode}
          </if>
          <if test="#{orderDate,javaType=java.sql.Date,jdbcType=DATE} != null">
            AND order_date = #{orderDate}
          </if>
        </where>
    ]]>
    </query>

    <query java-method-name="addFreebies1">
    <![CDATA[
      update purchase_order
        <set>
          <if test="#{discount,javaType=java.lang.Double,jdbcType=NUMERIC} != null">discount =
            #{discount}
          ,</if>
        </set>
    ]]>
    </query>

  </dao>

</hotrod>
