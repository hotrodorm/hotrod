<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="styles/lightweight.css">

<script src="jquery/jquery-3.1.1.min.js"></script>

<link rel="stylesheet" href="highlight/styles/vs.css">
<script src="highlight/highlight.pack.js"></script>
<script>
  $(document).ready(function() {
    $('pre').each(function(i, block) {
      hljs.highlightBlock(block);
    });
  });
</script>

</head>
<body>

  <table>
    <tr>
      <td><img src="images/hotrod-logo-70.png"
        style="display: inline;" /></td>
      <td>
        <p style="font-size: 30px; margin: 0; padding-left: 15px;">Advanced
          Database Persistence for Java</p>
        <p style="font-size: 18px; margin: 0; padding-left: 15px;">Examples
          &amp; Reference Manual</p>
      </td>
    </tr>
  </table>

  <div
    style="width: 100%; border-bottom: 2px solid #c0c0c0; font-size: 6px;">&nbsp;</div>

  <div>

    <ul class="menu">
      <li><a href="01-welcome-to-hotrod.html">Welcome to
          HotRod!</a></li>
      <li><a href="02-apache-2.0-license.html">Apache 2.0
          License</a></li>
      <li><a href="03-downloads.html">Downloads</a></li>
      <li><a href="04-hello-world-mybatis.html">Hello World
          MyBatis!</a></li>
      <li><a href="05-source-code.html">Source Code</a></li>
      <li><a href="06.1-ant-task.html">Ant Task</a></li>
      <li><a href="06.2-development-acceleration.html">Development
          Acceleration Using Hotrod</a></li>
      <li><a href="07.01-mybatis-generator.html">MyBatis
          Generator</a></li>
      <li class="menu2"><a href="07.02-mybatis-cheat-sheet.html">MyBatis
          Cheat Sheet</a></li>
      <li class="menu2"><a
        href="07.03-how-to-run-the-examples.html">How to Run the
          Examples</a></li>
      <li class="menu2"><a href="07.04-example01.html">Example
          1 - Basic CRUD Operations on Tables</a></li>
      <li class="menu2"><a href="07.04-example02.html">Example
          2 - Using Sequences &amp; Identity PKs</a></li>
      <li class="menu2"><a href="07.04-example03.html">Example
          3 - Select by Example</a></li>
      <li class="menu2"><a href="07.04-example04.html">Example
          4 - Update by Example</a></li>
      <li class="menu2"><a href="07.04-example05.html">Example
          5 - Delete by Example</a></li>
      <li class="menu2"><a href="07.04-example06.html">Example
          6 - Navigating Foreign Keys</a></li>
      <li class="menu2"><a href="07.04-example07.html">Example
          7 - Select by Unique Indexes</a></li>
      <li class="menu2"><a href="07.04-example08.html">Example
          8 - Selecting on Views</a></li>
      <li class="menu2"><a href="07.04-example09.html">Example
          9 - Retrieving Sequence Values</a></li>
      <li class="menu2"><a href="07.04-example10.html">Example
          10 - Regular SQL Queries</a></li>
      <li class="menu2"><a href="07.04-example11.html">Example
          11 - Custom DAOs</a></li>
      <li class="menu2"><a class="active"
        href="07.04-example12.html">Example 12 - Regular SQL Selects</a></li>
      <li class="menu2"><a href="07.04-example13.html">Example
          13 - Native SQL</a></li>
      <li class="menu2"><a href="07.04-example14.html">Example
          14 - Dynamic SQL</a></li>
      <li class="menu2"><a href="07.04-example15.html">Example
          15 - Transactions &amp; Isolation Levels</a></li>
      <li class="menu2"><a href="07.04-example16.html">Example
          16 - Optimistic Locking (Row Version Control)</a></li>
      <li class="menu2"><a href="07.04-example17.html">Example
          17 - Custom DAO Class Names</a></li>
      <li class="menu2"><a href="07.04-example18.html">Example
          18 - Custom DAO Property Names</a></li>
      <li class="menu2"><a href="07.04-example19.html">Example
          19 - Custom DAO Property Java Types</a></li>
      <li class="menu2"><a href="07.04-example20.html">Example
          20 - Fragments</a></li>
      <li class="menu2"><a href="07.04-example21.html">Example
          21 - Facets</a></li>
      <li class="menu2"><a href="07.04-example22.html">Example
          22 - Including Existing MyBatis Mappers</a></li>
      <li><a href="09-project-setup.html">Project Setup</a></li>
      <li><a href="10-database-support.html">Supported
          Databases &amp; Column Types</a></li>
      <li class="menu2"><a href="10.01-oracle.html">Oracle
          Database</a></li>
      <li class="menu2"><a href="10.02-db2.html">IBM DB2</a></li>
      <li class="menu2"><a href="10.03-sapase.html">SAP ASE /
          Sybase</a></li>
      <li class="menu2"><a href="10.04-sqlserver.html">Microsoft
          SQL Server</a></li>
      <li class="menu2"><a href="10.05-postgresql.html">PostgreSQL</a></li>
      <li class="menu2"><a href="10.06-mysql.html">MySQL</a></li>
      <li class="menu2"><a href="10.07-mariadb.html">MariaDB</a></li>
      <li class="menu2"><a href="10.08-hypersql.html">HyperSQL
          (HSQLDB)</a></li>
      <li class="menu2"><a href="10.09-h2.html">H2</a></li>
      <li><a href="11.01-configuration-reference.html">Configuration
          Reference</a></li>
      <li class="menu2"><a href="11.02-mybatis-generator.html">MyBatis
          Generator</a></li>
      <li class="menu2"><a href="11.04-tables.html">Tables</a></li>
      <li class="menu2"><a href="11.05-columns.html">Columns</a></li>
      <li class="menu2"><a href="11.06-sequences.html">Sequences</a></li>
      <li class="menu2"><a href="11.07-sql-queries.html">SQL
          Queries</a></li>
      <li class="menu2"><a href="11.08-views.html">Views</a></li>
      <li class="menu2"><a href="11.09-sql-selects.htmls">SQL
          Selects</a></li>
      <li class="menu2"><a href="11.10-dynamic-sql.html">Dynamic
          SQL</a></li>
      <li class="menu2"><a href="11.11-custom-daos.html">Custom
          DAOs </a></li>
      <li class="menu2"><a href="11.12-fragments.html">Fragments</a></li>
      <li class="menu2"><a href="11.13-facets.html">Facets</a></li>
      <li class="menu2"><a href="11.14-existing-mybatis-mappers">Existing
          MyBatis Mappers</a></li>
      <li><a href="12-faq.html">FAQ</a></li>
    </ul>

    <div class="article">

      <!-- ============= -->
      <!-- Article Begin -->
      <!-- ============= -->

      <h1>Example 12 - Regular SQL Selects</h1>

      <p>This example shows how to run regular (free) SQL selects.</p>

      <p>SQL selects must be configured in the configuration file.
        See the reference section for details on their syntax and how to
        define their parameters.</p>

      <p>SQL selects are exposed in the DAOs as simple java methods
        with the configured java parameters.</p>

      <p>Regular SQL selects shares the syntax with Native SQL and
        Dynamic SQL. They can be combined all at once when creating SQL
        statements.</p>

      <p>SQL selects can include &lt;column&gt; tags to force the
        Java name and Java type of the result set. When included they
        need to be included outside the CDATA section, if any.</p>

      <h2>How to Run this example</h2>

      <p>
        The <strong>Example 12</strong> is included in the download
        package. To run this example please refer to the section How to
        Run the Examples above.
      </p>

      <h2>Case #1: Columns from a single table</h2>

      <p>The configuration file includes the SQL select that
        retrieves clients created between two dates using the following
        SQL statement:</p>

      <pre class="xml">  &lt;select java-class-name="CreatedClient">
  &lt;![CDATA[
    select * from client
      {* 
      where created_at between #{since,javaType=java.sql.Date,jdbcType=DATE}
                           and #{until,javaType=java.sql.Date,jdbcType=DATE}
      *}
  ]]>
  &lt;/select></pre>

      <p>
        The SQL select can be run using the
        <code>select(java.sql.Date since, java.sql.Date until)</code>
        Java method on the DAO
        <code>CreatedClient</code>
        .
      </p>

      <h2>Case #2: Join returns fully-typed, fully-named columns
        from multiple tables</h2>

      <p>
        A new DAO Java class is generated to include the <strong>fully-typed</strong>,
        <strong>fully-named</strong> returned columns for both tables on
        the SQL select. The configuration file includes the SQL select
        performs the SQL join:
      </p>

      <pre class="xml">  &lt;select java-class-name="ClientWithPurchase">
  &lt;![CDATA[
    select p.*, c.vip, c.state from purchase p
      join client c on (c.id) = (p.client_id)
      {*
      where p.purchase_date =
        #{purchaseDate,javaType=java.sql.Date,jdbcType=DATE}
      *}
  ]]>
  &lt;/select></pre>

      <p>
        The SQL select can be run using the
        <code>select(java.sql.Date purchaseDate)</code>
        Java method on the DAO
        <code>ClientWithPurchase</code>
        .
      </p>

      <h2>Case #3: Grouping and adding extra columns</h2>

      <p>
        A new DAO Java class is generated to include the <strong>fully-typed</strong>,
        <strong>fully-named</strong> returned columns from the SQL
        select. The configuration file includes the following SQL
        select:
      </p>

      <pre class="xml">  &lt;select java-class-name="DailyTotal">
  &lt;![CDATA[
    select 
        purchase_date, 
        count(*) as number_of_purchases, 
        sum(vehicle_price) as price, 
        sum(extras_price) as extras, 
        sum(discount) as discount, 
        sum(tax) as taxes, 
        sum(final_price) as revenue
      from purchase
      {*
      where purchase_date between #{from,javaType=java.sql.Date,jdbcType=DATE}
                              and #{to,javaType=java.sql.Date,jdbcType=DATE}
      group by purchase_date
      *}
  ]]>
  &lt;/select></pre>

      <p>
        The SQL select can be run using the
        <code>select(java.sql.Date from, java.sql.Date to)</code>
        Java method on the DAO
        <code>DailyTotal</code>
        .
      </p>

      <h2>Case #4: Subqueries</h2>

      <p>
        A new DAO Java class is generated to include the <strong>fully-typed</strong>,
        <strong>fully-named</strong> returned columns from the SQL
        select. The configuration file includes the following SQL
        select:
      </p>

      <pre class="xml">  &lt;select java-class-name="ClientNeverOfferedDiscount">
  &lt;![CDATA[
    select * from client where id not in 
      (select client_id from purchase where discount > 0)
  ]]>
  &lt;/select></pre>

      <p>
        The SQL select can be using the
        <code>select()</code>
        Java method on the DAO
        <code>ClientNeverOfferedDiscount</code>
        .
      </p>

      <p>&nbsp;</p>


      <!-- =========== -->
      <!-- Article End -->
      <!-- =========== -->

    </div>

  </div>

</body>
</html>