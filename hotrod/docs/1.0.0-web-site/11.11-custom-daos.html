<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="styles/lightweight.css">

<script src="jquery/jquery-3.1.1.min.js"></script>

<link rel="stylesheet" href="highlight/styles/vs.css">
<script src="highlight/highlight.pack.js"></script>
<script>
  $(document).ready(function() {
    $('pre').each(function(i, block) {
      hljs.highlightBlock(block);
    });
  });
</script>

</head>
<body>

  <table>
    <tr>
      <td><img src="images/hotrod-logo-70.png"
        style="display: inline;" /></td>
      <td>
        <p style="font-size: 30px; margin: 0; padding-left: 15px;">Advanced
          Database Persistence for Java</p>
        <p style="font-size: 18px; margin: 0; padding-left: 15px;">Examples
          &amp; Reference Manual</p>
      </td>
    </tr>
  </table>

  <div
    style="width: 100%; border-bottom: 2px solid #c0c0c0; font-size: 6px;">&nbsp;</div>

  <div>

    <ul class="menu">
      <li><a href="01-welcome-to-hotrod.html">Welcome to
          HotRod!</a></li>
      <li><a href="02-apache-2.0-license.html">Apache 2.0
          License</a></li>
      <li><a href="03-downloads.html">Downloads</a></li>
      <li><a href="04-hello-world-mybatis.html">Hello World MyBatis!</a></li>
      <li><a href="05-source-code.html">Source Code</a></li>
      <li><a href="06.1-ant-task.html">Ant Task</a></li>
      <li><a href="06.2-development-acceleration.html">Development Acceleration Using Hotrod</a></li>
      <li><a href="07.01-mybatis-generator.html">MyBatis Generator</a></li>
      <li class="menu2"><a href="07.02-mybatis-cheat-sheet.html">MyBatis Cheat Sheet</a></li>
      <li class="menu2"><a href="07.03-how-to-run-the-examples.html">How to Run the Examples</a></li>
      <li class="menu2"><a href="07.04-example01.html">Example 1 - Basic CRUD
          Operations on Tables</a></li>
      <li class="menu2"><a href="07.04-example02.html">Example 2 - Using
          Sequences &amp; Identity PKs</a></li>
      <li class="menu2"><a href="07.04-example03.html">Example 3 - Select by
          Example</a></li>
      <li class="menu2"><a href="07.04-example04.html">Example 4 - Update by
          Example</a></li>
      <li class="menu2"><a href="07.04-example05.html">Example 5 - Delete by
          Example</a></li>
      <li class="menu2"><a href="07.04-example06.html">Example 6 - Navigating
          Foreign Keys</a></li>
      <li class="menu2"><a href="07.04-example07.html">Example 7 - Select by
          Unique Indexes</a></li>
      <li class="menu2"><a href="07.04-example08.html">Example 8 - Selecting
          on Views</a></li>
      <li class="menu2"><a href="07.04-example09.html">Example 9 - Retrieving
          Sequence Values</a></li>
      <li class="menu2"><a href="07.04-example10.html">Example 10 - Regular
          SQL Queries</a></li>
      <li class="menu2"><a href="07.04-example11.html">Example 11 - Custom
          DAOs</a></li>
      <li class="menu2"><a href="07.04-example12.html">Example 12 - Regular
          SQL Selects</a></li>
      <li class="menu2"><a href="07.04-example13.html">Example 13 - Native SQL</a></li>
      <li class="menu2"><a href="07.04-example14.html">Example 14 - Dynamic
          SQL</a></li>
      <li class="menu2"><a href="07.04-example15.html">Example 15 -
          Transactions &amp; Isolation Levels</a></li>
      <li class="menu2"><a href="07.04-example16.html">Example 16 - Optimistic
          Locking (Row Version Control)</a></li>
      <li class="menu2"><a href="07.04-example17.html">Example 17 - Custom DAO
          Class Names</a></li>
      <li class="menu2"><a href="07.04-example18.html">Example 18 - Custom DAO
          Property Names</a></li>
      <li class="menu2"><a href="07.04-example19.html">Example 19 - Custom DAO
          Property Java Types</a></li>
      <li class="menu2"><a href="07.04-example20.html">Example 20 - Fragments</a></li>
      <li class="menu2"><a href="07.04-example21.html">Example 21 - Facets</a></li>
      <li class="menu2"><a href="07.04-example22.html">Example 22 - Including
          Existing MyBatis Mappers</a></li>
      <li><a href="09-project-setup.html">Project Setup</a></li>
      <li><a href="10-database-support.html">Supported Databases &amp; Column Types</a></li>
      <li class="menu2"><a href="10.01-oracle.html">Oracle Database</a></li>
      <li class="menu2"><a href="10.02-db2.html">IBM DB2</a></li>
      <li class="menu2"><a href="10.03-sapase.html">SAP ASE / Sybase</a></li>
      <li class="menu2"><a href="10.04-sqlserver.html">Microsoft SQL Server</a></li>
      <li class="menu2"><a href="10.05-postgresql.html">PostgreSQL</a></li>
      <li class="menu2"><a href="10.06-mysql.html">MySQL</a></li>
      <li class="menu2"><a href="10.07-mariadb.html">MariaDB</a></li>
      <li class="menu2"><a href="10.08-hypersql.html">HyperSQL (HSQLDB)</a></li>
      <li class="menu2"><a href="10.09-h2.html">H2</a></li>
      <li><a href="11.01-configuration-reference.html">Configuration Reference</a></li>
      <li class="menu2"><a href="11.02-mybatis-generator.html">MyBatis Generator</a></li>
      <li class="menu2"><a href="11.04-tables.html">Tables</a></li>
      <li class="menu2"><a href="11.05-columns.html">Columns</a></li>
      <li class="menu2"><a href="11.06-sequences.html">Sequences</a></li>
      <li class="menu2"><a href="11.07-sql-queries.html">SQL Queries</a></li>
      <li class="menu2"><a href="11.08-views.html">Views</a></li>
      <li class="menu2"><a href="11.09-sql-selects.html">SQL Selects</a></li>
      <li class="menu2"><a href="11.10-dynamic-sql.html">Dynamic SQL</a></li>
      <li class="menu2"><a class="active" href="11.11-custom-daos.html">Custom DAOs </a></li>
      <li class="menu2"><a href="11.12-fragments.html">Fragments</a></li>
      <li class="menu2"><a href="11.13-facets.html">Facets</a></li>
      <li class="menu2"><a href="11.14-existing-mybatis-mappers.html">Existing MyBatis
          Mappers</a></li>
      <li><a href="12-faq.html">FAQ</a></li>
    </ul>

    <div class="article">

      <!-- ============= -->
      <!-- Article Begin -->
      <!-- ============= -->

<h1>Custom DAOs</h1>

<p>The <code>&lt;sequence&gt;</code> and <code>&lt;query&gt;</code> tags can be included in existing <code>&lt;table&gt;</code> and <code>&lt;view&gt;</code> tags that serve as container DAO classes where to place the corresponding Java method that retrieve sequence values and execute SQL updates respectively.</p>

<p>This was though to consider most of the time the <code>&lt;sequence&gt;</code> and <code>&lt;query&gt;</code> tags are conceptually related to a database table or view. If this is the case then the corresponding <code>&lt;table&gt;</code> and <code>&lt;view&gt;</code> tags seems to best container to place them.</p>

<p>However, there are <code>&lt;sequence&gt;</code> and <code>&lt;query&gt;</code> tags that are not conceptually related to any table or view. The simplest workaround is to just place them into any existing <code>&lt;table&gt;</code> or <code>&lt;view&gt;</code> tag. Yet this is not a clean solution.</p>

<p>HotRod provides a container DAO classes to be defined using the <code>&lt;dao&gt;</code> tag. These DAOs are unrelated to any database object and serve only as container for <code>&lt;sequence&gt;</code> and <code>&lt;query&gt;</code> tags. In essence, they are heavily simplified <code>&lt;table&gt;</code> tags that do not relate to any table and do not have any persistence method except for the enumerated <code>&lt;sequence&gt;</code> and <code>&lt;query&gt;</code> tags.</p>

<h2>The &lt;dao&gt; Tag</h2>

<p>The <code>&lt;dao&gt;</code> tag attributes are:</p>

<table class="data-table">
  <tbody>
    <tr>
      <th><strong>Attribute</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Required</strong></th>
    </tr>
    <tr>
      <td>java-class-name</td>
      <td>The name of the DAO Java class that will be created. The name must be unique and different to all other names produced from a <code>&lt;table&gt;</code>, <code>&lt;view&gt;</code>, <code>&lt;select&gt;</code>, and/or <code>&lt;dao&gt;</code> tag since they live in the same namespace.</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<p>The example below shows a custom DAO definition:</p>

<p>&lt;dao java-class-name=&rdquo;DocumentUtilities&rdquo;&gt;</p>

<p>&nbsp; &lt;sequence name=&quot;document_seq&quot; /&gt;</p>

<pre class="xml">&lt;dao java-class-name=”DocumentUtilities”>

  &lt;sequence name="document_seq" />

  &lt;query java-method-name="markOldDocuments">
  &lt;![CDATA[
    update document set mark = 1
      where mark = 0 and closing_date
        between #{from,javaType=java.util.Date,jdbcType=TIMESTAMP}
            and #{to,javaType=java.util.Date,jdbcType=TIMESTAMP}
  ]]>
  &lt;/query>

&lt;/dao></pre>

<p>The DAO above defines the DAO Java class <code>DocumentUtilities</code>. This is a DAO class (even if the specified name does not include the DAO suffix). The execution of its methods will participate in any transaction as all DAOs do.</p>

<p>The name specified on the <code>&lt;dao&gt;</code> tag must be different to all other DAOs produced from a <code>&lt;table&gt;</code>, <code>&lt;view&gt;</code>, <code>&lt;select&gt;</code>, and/or <code>&lt;dao&gt;</code> tag since they live in the same namespace.</p>

<p>This DAO class has two static methods: the <code>selectSequenceDocumentSeq()</code> method retrieves sequence values, and the <code>markOldDocuments(from, to)</code> that executes the parameterized SQL update.</p>

<p>&nbsp;</p>


      <!-- =========== -->
      <!-- Article End -->
      <!-- =========== -->

    </div>

  </div>

</body>
</html>